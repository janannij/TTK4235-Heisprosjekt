<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TTK4235 Heisprosjekt: source/FSM.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TTK4235 Heisprosjekt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">FSM.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Finite state machine. Chooses the next state for the elevator.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="order_8h_source.html">order.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hardware_8h_source.html">hardware.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for FSM.h:</div>
<div class="dyncontent">
<div class="center"><img src="FSM_8h__incl.png" border="0" usemap="#source_2FSM_8h" alt=""/></div>
<map name="source_2FSM_8h" id="source_2FSM_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="FSM_8h__dep__incl.png" border="0" usemap="#source_2FSM_8hdep" alt=""/></div>
<map name="source_2FSM_8hdep" id="source_2FSM_8hdep">
</map>
</div>
</div>
<p><a href="FSM_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af9298353b81a0dc42f702b4dc896e489"><td class="memItemLeft" align="right" valign="top"><a id="af9298353b81a0dc42f702b4dc896e489"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#af9298353b81a0dc42f702b4dc896e489">system_state</a> { <br />
&#160;&#160;<b>INIT</b>, 
<b>IDLE</b>, 
<b>MOVING_UP</b>, 
<b>MOVING_DOWN</b>, 
<br />
&#160;&#160;<b>DOORS_OPEN</b>, 
<b>STOP</b>
<br />
 }<tr class="memdesc:af9298353b81a0dc42f702b4dc896e489"><td class="mdescLeft">&#160;</td><td class="mdescRight">The different states the elevator can be in. <br /></td></tr>
</td></tr>
<tr class="separator:af9298353b81a0dc42f702b4dc896e489"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6d28dcad43166c03b061f129a8759018"><td class="memItemLeft" align="right" valign="top"><a id="a6d28dcad43166c03b061f129a8759018"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#a6d28dcad43166c03b061f129a8759018">fsm_init</a> ()</td></tr>
<tr class="memdesc:a6d28dcad43166c03b061f129a8759018"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines a state for the elevator. Updates current floor. <br /></td></tr>
<tr class="separator:a6d28dcad43166c03b061f129a8759018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cc425408925d49191639b96fb397981"><td class="memItemLeft" align="right" valign="top"><a id="a0cc425408925d49191639b96fb397981"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#a0cc425408925d49191639b96fb397981">fsm_idle</a> ()</td></tr>
<tr class="memdesc:a0cc425408925d49191639b96fb397981"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if there are any orders, sets the next state. <br /></td></tr>
<tr class="separator:a0cc425408925d49191639b96fb397981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac99ecf1201a9f07b6f6d74f1aa7b784c"><td class="memItemLeft" align="right" valign="top"><a id="ac99ecf1201a9f07b6f6d74f1aa7b784c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#ac99ecf1201a9f07b6f6d74f1aa7b784c">fsm_moving_down</a> ()</td></tr>
<tr class="memdesc:ac99ecf1201a9f07b6f6d74f1aa7b784c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the elevator direction downwards. If it is an order in the same direction as the current order it will stop there, otherwise it will stop at the floor of the current order. <br /></td></tr>
<tr class="separator:ac99ecf1201a9f07b6f6d74f1aa7b784c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c75de7006a8332728273664fb4875f"><td class="memItemLeft" align="right" valign="top"><a id="a12c75de7006a8332728273664fb4875f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#a12c75de7006a8332728273664fb4875f">fsm_moving_up</a> ()</td></tr>
<tr class="memdesc:a12c75de7006a8332728273664fb4875f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the elevator direction upwards. If it is an order in the same direction as the current order it will stop there, otherwise it will stop at the floor of the current order. <br /></td></tr>
<tr class="separator:a12c75de7006a8332728273664fb4875f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56260be0ca30214ac0fc12fe37ffcbeb"><td class="memItemLeft" align="right" valign="top"><a id="a56260be0ca30214ac0fc12fe37ffcbeb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#a56260be0ca30214ac0fc12fe37ffcbeb">fsm_doors_open</a> ()</td></tr>
<tr class="memdesc:a56260be0ca30214ac0fc12fe37ffcbeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the orders at the current floor. Opens the door, and keeps it open for 3 seconds. If the obstuction signal is active, the door will open as long as it is active. Then it will close after 3 seconds. As long as the stop button is pushed the stop light will be on, and if the elevator is at a floor the doors will open as long as stop is active and will close 3 seconds after the button is released. <br /></td></tr>
<tr class="separator:a56260be0ca30214ac0fc12fe37ffcbeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ebf955cf96db409422aad436b3a4bb7"><td class="memItemLeft" align="right" valign="top"><a id="a6ebf955cf96db409422aad436b3a4bb7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#a6ebf955cf96db409422aad436b3a4bb7">fsm_stop</a> ()</td></tr>
<tr class="memdesc:a6ebf955cf96db409422aad436b3a4bb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the elevator immidiately. If the stop button is pushed, all orders will be deleted, and the stop light will be on. If the elevator is at a floor as the stop button is pushed, the doors will open. <br /></td></tr>
<tr class="separator:a6ebf955cf96db409422aad436b3a4bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c3627411350e19559268e0c4af5752"><td class="memItemLeft" align="right" valign="top"><a id="a74c3627411350e19559268e0c4af5752"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#a74c3627411350e19559268e0c4af5752">fsm_next_order</a> ()</td></tr>
<tr class="memdesc:a74c3627411350e19559268e0c4af5752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue system for the elevator. Priorities the orders, based on the previous direction. <br /></td></tr>
<tr class="separator:a74c3627411350e19559268e0c4af5752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac64982f1797f22a589bd6fa9017369a6"><td class="memItemLeft" align="right" valign="top"><a id="ac64982f1797f22a589bd6fa9017369a6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#ac64982f1797f22a589bd6fa9017369a6">fsm_update_position</a> ()</td></tr>
<tr class="memdesc:ac64982f1797f22a589bd6fa9017369a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the position, defines whether the elevator is above, below or at a floor, and sets the floor indicators. <br /></td></tr>
<tr class="separator:ac64982f1797f22a589bd6fa9017369a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae40f1570ae9205565011ed1219101a53"><td class="memItemLeft" align="right" valign="top"><a id="ae40f1570ae9205565011ed1219101a53"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="FSM_8h.html#ae40f1570ae9205565011ed1219101a53">fsm_run</a> ()</td></tr>
<tr class="memdesc:ae40f1570ae9205565011ed1219101a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates orders and current floor. Let the elevator switch between different states. <br /></td></tr>
<tr class="separator:ae40f1570ae9205565011ed1219101a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0b67b9968ae845af5325952f87f1298e"><td class="memItemLeft" align="right" valign="top"><a id="a0b67b9968ae845af5325952f87f1298e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>g_between_floors</b></td></tr>
<tr class="separator:a0b67b9968ae845af5325952f87f1298e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1e8fcdd42c4898312cb345553654b25"><td class="memItemLeft" align="right" valign="top"><a id="aa1e8fcdd42c4898312cb345553654b25"></a>
<a class="el" href="FSM_8h.html#af9298353b81a0dc42f702b4dc896e489">system_state</a>&#160;</td><td class="memItemRight" valign="bottom"><b>g_current_state</b></td></tr>
<tr class="separator:aa1e8fcdd42c4898312cb345553654b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa83e4d91b0e557555d65bc15264fcdfb"><td class="memItemLeft" align="right" valign="top"><a id="aa83e4d91b0e557555d65bc15264fcdfb"></a>
<a class="el" href="FSM_8h.html#af9298353b81a0dc42f702b4dc896e489">system_state</a>&#160;</td><td class="memItemRight" valign="bottom"><b>g_prev_state</b></td></tr>
<tr class="separator:aa83e4d91b0e557555d65bc15264fcdfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Finite state machine. Chooses the next state for the elevator. </p>

<p class="definition">Definition in file <a class="el" href="FSM_8h_source.html">FSM.h</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
